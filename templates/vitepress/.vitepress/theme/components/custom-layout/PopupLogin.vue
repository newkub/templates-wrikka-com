<script setup>
import {
	SignOutButton,
	SignedIn,
	SignedOut,
	UserButton,
	useClerk,
	useUser,
} from "@clerk/vue";
import { useSupabase } from "@theme/composables/useSupabase";
import { useData } from "vitepress";
import { watchEffect } from "vue";

const clerk = useClerk();
const { frontmatter } = useData();
const { isLoaded, isSignedIn, user } = useUser();
const { isCustomer, isLoading, checkCustomer } = useSupabase();

watchEffect(async () => {
	if (isLoaded.value && isSignedIn.value) {
		await checkCustomer(user.value.primaryEmailAddress);
	}
});

// ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á Messenger
const messengerLink = "https://m.me/yourpage";
</script>

<template>
    <div v-if="isLoading && !frontmatter.publish"
        class="flex flex-col items-center justify-center gap-5 w-full fixed inset-0 z-50">
    </div>

    <div v-if="!frontmatter.publish">
        <SignedOut>
            <div
                class="flex flex-col items-center justify-center gap-5 w-full fixed inset-0 bg-black bg-opacity-82 z-50">
                <div
                    class="flex flex-col gap-5 bg-gray-800 bg-opacity-50 backdrop-blur-md p-5 rounded-md max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl mx-4 sm:mx-6 md:mx-8 lg:mx-12">
                    <p class="text-white text-2xl font-bold text-center">üîë Wrika all in one</p>
                    <p class="text-yellow-400 text text-center text-base font-bold">‚ö†Ô∏è ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÉ‡∏ô 7 ‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô 2025</p>
                    <p class="text-gray-300 text text-center text-base">‡πÅ‡∏ä‡∏£‡πå‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡∏à‡∏∞‡∏£‡∏π‡πâ</p>
                    <p class="text-gray-300 text text-center text-base">‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ</p>
                    
                   

                    <p class="text-center text-[#ff4d4d]">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                    
                    <div class="flex flex-col gap-3">
                        <div class="flex flex-row gap-3">
                            <button
                                class="w-full bg-white p-2 rounded-md transition-colors duration-300 text-dark text-base"
                                @click="clerk.openSignUp">‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
                            <button
                                class="w-full bg-[#2176ff] p-2 rounded-md transition-colors duration-300 text-white text-base"
                                @click="clerk.openSignIn">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                            </button>
                        </div>
                      
                       
                    </div>

                     <!-- ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô -->
                   <p class="text-center text-lg font-bold text-green-400">
    üî• ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 
    <span class="text-gray-400 line-through text-xl font-semibold">3,500</span>  
    <span class="text-yellow-400 text-2xl">‚Üí 1,000 ‡∏ö‡∏≤‡∏ó üëá</span>
</p>



	<!-- 
<a href="https://www.tldraw.com/p/BtmFDxRKlJpwDnjmJmKkf?d=v-7730.-13275.9813.5660.j5X9HKTZ6HTHHZLWHsYty" target="_blank" rel="noopener noreferrer"
   class="w-full bg-white text-gray-800 text-center p-2 rounded-md text-lg font-bold mt-3 transition duration-300 hover:bg-gray-100">
    ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
</a> -->




                    <a href="https://www.facebook.com/webdev.sharex" target="_blank" 
    class=" bg-[#2176ff] text-white text-center p-1.5 rounded-md text-base font-semibold mt-2 transition duration-300 bg-[#2176ff]">
    üíµ ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 1,000 ‡∏ö‡∏≤‡∏ó
</a>

                    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Messenger -->
                   
                </div>
            </div>
        </SignedOut>

        <SignedIn>
            <div v-if="!isLoading && !isCustomer"
                class="flex flex-col items-center justify-center w-full fixed inset-0 bg-black bg-opacity-80 z-50">
                <div class="flex flex-col gap-5">
                    <div class="flex flex-col items-center gap-3">
                        <p class="text-lg text-red">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ</p>
                        <p class="text-gray text-base">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
                        <div class="flex flex-tow items-center gap-2 text-white">
                            <span>{{ user.primaryEmailAddress }}</span>
                            <UserButton />
                        </div>

                        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Messenger -->
                        <a href="https://www.facebook.com/webdev.sharex" target="_blank" rel="noopener noreferrer"
   class="w-full bg-blue-500 text-white text-center p-2 rounded-md text-lg font-bold mt-3 transition duration-300 hover:bg-blue-600">
    üíµ ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ 
</a>

                        <SignOutButton class="text-base hover:text-red">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</SignOutButton>
                    </div>
                </div>
            </div>
        </SignedIn>
    </div>
</template>
